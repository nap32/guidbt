<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Force Graph Example</title>
        <script src="//unpkg.com/force-graph"></script>
    </head>
    <body>
        <div id="graph-container"></div>

        <script>
            fetch(`http://localhost:3000/traffic/graph?host=.*\\.com`)
                .then(response => response.json())
                .then(data => {
                    if (typeof data === 'string') {
                        data = JSON.parse(data);
                    }
                    return data;
                })
                .then(data => {
                    const Graph = ForceGraph()
                    (document.getElementById('graph-container'))
                        .graphData(data)
                        .nodeId('id')
                        .nodeLabel('id')
                        .linkSource('source')
                        .linkTarget('target')
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        </script>
    </body>
</html>
